// filepath: c:\Users\silas\speed-reader\src\CustomTitleBar.jsx
import React, { useEffect } from "react";
import logo from "../assets/logov3.webp"; // Import the logo

const CustomTitleBar = () => {
  useEffect(() => {
    if (window.electronAPI) {
      document.getElementById("minimize-btn").addEventListener("click", () => {
        window.electronAPI.minimizeWindow();
      });

      document.getElementById("maximize-btn").addEventListener("click", () => {
        window.electronAPI.maximizeWindow();
      });

      document.getElementById("close-btn").addEventListener("click", () => {
        window.electronAPI.closeWindow();
      });

      window.electronAPI.onDarkMode((event, args) => {
        document.body.classList.toggle("dark-mode", args.enabled);
      });
    } else {
      console.warn("Electron API not available.");
    }
  }, []);

  const svgMinimize = (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="3"
      viewBox="0 0 16 3"
      fill="none"
    >
      <path
        d="M0.000416579 1.09333C0.0108311 1.08499 0.0295772 1.07749 0.0304103 1.06833C0.0437409 0.914576 0.0920642 0.777493 0.178713 0.645409C0.378255 0.340409 0.541137 0.215409 0.769006 0.122076C0.877317 0.0774927 0.987294 0.0474923 1.1056 0.0279089C1.38263 -0.0179244 1.65882 0.00957576 1.93543 0.00332576C2.21079 -0.00334091 2.48615 0.00207581 2.76151 0.00207581C6.7161 0.00207581 10.6703 0.00207581 14.6249 0.00207581C14.6949 0.00207581 14.7619 0.00707556 14.8315 0.0291589C14.8952 0.0495756 14.9685 0.0274924 15.0365 0.0624924C15.0956 0.092909 15.1656 0.102076 15.2272 0.127909C15.2893 0.153743 15.3476 0.188742 15.4072 0.220409C15.4351 0.235409 15.6013 0.401659 15.6305 0.428742C15.7196 0.511242 15.793 0.606243 15.8396 0.717076C15.9188 0.903743 15.9754 1.09499 15.9683 1.30416C15.9613 1.51541 15.9163 1.71458 15.808 1.89333C15.6317 2.18416 15.6109 2.20833 15.3422 2.37249C15.1985 2.46041 15.0477 2.52333 14.8765 2.52833C14.7978 2.58208 14.7086 2.55833 14.6245 2.55833C10.1866 2.55958 5.7488 2.55916 1.31139 2.55999C1.16059 2.55999 1.00771 2.53791 0.872318 2.48958C0.725266 2.43708 0.566549 2.38041 0.456572 2.25208C0.374089 2.15541 0.27036 2.08041 0.199958 1.96916C0.106644 1.82083 0.0420746 1.66791 0.0299938 1.49291C0.0295772 1.48416 0.0104145 1.47624 0 1.46833C0 1.34374 0 1.21874 0 1.09416L0.000416579 1.09333Z"
        fill="#5A5A5A"
      />
    </svg>
  );

  const svgMaximize = (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      viewBox="0 0 16 16"
      fill="none"
    >
      <path
        d="M2 1H14C14.5523 1 15 1.44772 15 2V14C15 14.5523 14.5523 15 14 15H2C1.44772 15 1 14.5523 1 14V2C1 1.44772 1.44772 1 2 1Z"
        stroke="#5A5A5A"
        stroke-width="2"
      />
    </svg>
  );

  const svgClose = (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="16"
      height="16"
      viewBox="0 0 16 16"
      fill="none"
    >
      <path
        d="M16 14.527C15.9896 14.5353 15.97 14.5432 15.97 14.5516C15.9691 14.7878 15.8619 14.9848 15.7408 15.1755C15.5831 15.4238 15.3548 15.5916 15.0869 15.7005C14.9993 15.7364 14.9029 15.7602 14.8073 15.7819C14.6487 15.8177 14.491 15.8136 14.3349 15.8044C14.0436 15.7873 13.7661 15.7122 13.5265 15.5352C13.4535 15.4814 13.383 15.4225 13.3187 15.3587C11.5881 13.6293 9.85783 11.8995 8.12802 10.1693C8.09129 10.1325 8.05582 10.095 8.01033 10.0482C7.98112 10.0633 7.9494 10.0758 7.9227 10.095C7.89766 10.1129 7.87804 10.1384 7.85592 10.1605C6.09649 11.9199 4.33747 13.6798 2.57678 15.438C2.41402 15.6003 2.21078 15.6934 1.98668 15.7476C1.8811 15.7731 1.77468 15.7927 1.66826 15.8048C1.55517 15.8177 1.4379 15.8194 1.32522 15.8048C1.17582 15.7852 1.02308 15.766 0.885362 15.7005C0.721354 15.622 0.563188 15.5373 0.427558 15.4067C0.228494 15.2147 0.112061 14.976 0.0444544 14.7214C-0.00645907 14.5311 -0.0181441 14.3287 0.0331867 14.1234C0.107053 13.8267 0.114148 13.7758 0.287337 13.5095C0.352857 13.4085 0.424219 13.3125 0.509771 13.227C2.28799 11.4492 4.06579 9.6714 5.84818 7.88901C5.79434 7.83559 5.74093 7.78175 5.68709 7.72792C3.94894 5.9906 2.21203 4.25245 0.473046 2.5168C0.321975 2.36572 0.228494 2.18753 0.161305 1.9893C0.121242 1.87078 0.0811789 1.75142 0.10121 1.62497C0.110392 1.5678 0.0298481 1.52857 0.0878561 1.45638C0.118738 1.41798 0.0895254 1.33577 0.100793 1.27609C0.147951 1.02987 0.241431 0.80535 0.387495 0.597523C0.477637 0.469404 0.590731 0.369664 0.71259 0.286199C0.854063 0.188963 1.00597 0.103829 1.18041 0.0595922C1.3536 0.0157732 1.52554 -0.00717959 1.70206 0.00200153C1.86482 0.010348 2.01923 0.055419 2.16905 0.118018C2.35434 0.195223 2.5196 0.298719 2.65774 0.448121C2.79921 0.600861 2.94611 0.749011 3.09885 0.890067C3.94309 1.66838 4.73058 2.50344 5.54645 3.31013C6.36399 4.11848 7.1736 4.93561 7.98655 5.74855C9.72512 4.00998 11.4624 2.27266 13.1998 0.534924C13.3275 0.407223 13.4693 0.300388 13.6304 0.217341C13.6776 0.193136 13.7152 0.154325 13.7736 0.145978C13.8249 0.138884 13.8729 0.110923 13.9234 0.0942301C13.9747 0.0771198 14.0327 0.0737812 14.0807 0.0579229C14.2126 0.0145213 14.3466 0.0220331 14.4747 0.0362221C14.6274 0.052915 14.7777 0.0871356 14.9262 0.149317C15.0932 0.21901 15.2338 0.321672 15.3723 0.42642C15.4808 0.508633 15.6778 0.797004 15.7563 0.998571C15.8577 1.26023 15.8614 1.52607 15.8364 1.78898C15.8168 1.99806 15.7413 2.20505 15.6048 2.37783C15.5518 2.44502 15.4992 2.51387 15.4387 2.57439C13.7131 4.30169 11.9866 6.02774 10.2601 7.75421C10.2242 7.7901 10.1879 7.82641 10.1441 7.87023C10.1696 7.89735 10.1892 7.91947 10.21 7.93992C11.399 9.12888 12.588 10.3178 13.7769 11.5068C14.3904 12.0518 14.9421 12.6594 15.5309 13.2291C15.7116 13.4039 15.8377 13.6147 15.9245 13.8471C15.9508 13.9177 15.98 13.9965 15.97 14.0792C15.9687 14.0913 15.9891 14.1063 15.9996 14.1197V14.5257L16 14.527Z"
        fill="#5A5A5A"
      />
    </svg>
  );

  return (
    <div className="bar">
      <div className="title-bar width-80">
        <div className="title-logo flex-start">
          <img
            src={logo}
            alt="speed-reader-logo"
            className="logo flex-center"
          />
        </div>
      </div>
      <div id="custom-title-bar" className="flex-center">
        <button
          id="minimize-btn"
          title="Minimize"
          className="unstyled-button title-bar-icons flex-center"
        >
          {svgMinimize}
        </button>
        <button
          id="maximize-btn"
          title="Maximize"
          className="unstyled-button title-bar-icons"
        >
          {svgMaximize}
        </button>
        <button
          id="close-btn"
          title="Close"
          className="unstyled-button title-bar-icons"
        >
          {svgClose}
        </button>
      </div>
    </div>
  );
};

export default CustomTitleBar;
