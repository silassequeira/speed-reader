// filepath: c:\Users\silas\speed-reader\src\CustomTitleBar.jsx
import React, { useEffect } from "react";

const CustomTitleBar = () => {
  useEffect(() => {
    if (window.electronAPI) {
      document.getElementById("minimize-btn").addEventListener("click", () => {
        window.electronAPI.minimizeWindow();
      });

      document.getElementById("maximize-btn").addEventListener("click", () => {
        window.electronAPI.maximizeWindow();
      });

      document.getElementById("close-btn").addEventListener("click", () => {
        window.electronAPI.closeWindow();
      });

      window.electronAPI.onDarkMode((event, args) => {
        document.body.classList.toggle("dark-mode", args.enabled);
      });
    } else {
      console.warn("Electron API not available.");
    }
  }, []);

  const svgMinimize = (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="18"
      height="3"
      viewBox="0 0 18 3"
      fill="none"
    >
      <path
        d="M17.9995 1.23238C17.9878 1.22299 17.9667 1.21454 17.9657 1.2042C17.9507 1.0309 17.8962 0.876381 17.7986 0.727498C17.5736 0.383705 17.39 0.242807 17.1332 0.137603C17.0111 0.0873488 16.8871 0.0535327 16.7538 0.0314586C16.4415 -0.0202042 16.1302 0.0107937 15.8184 0.00374876C15.508 -0.00376583 15.1976 0.00233983 14.8873 0.00233983C10.4297 0.00233983 5.97259 0.00233983 1.51502 0.00233983C1.43613 0.00233983 1.36053 0.00797548 1.28211 0.0328676C1.21027 0.055881 1.12763 0.0309891 1.05109 0.0704406C0.98441 0.104726 0.905524 0.115059 0.836028 0.144178C0.766063 0.173297 0.700324 0.212748 0.633176 0.248442C0.601715 0.26535 0.414359 0.452745 0.381489 0.483273C0.281002 0.576266 0.19836 0.68335 0.145768 0.80828C0.0565513 1.01869 -0.00730926 1.23426 0.000673331 1.47003C0.00865592 1.70815 0.0593691 1.93265 0.181456 2.13413C0.380081 2.46196 0.403559 2.4892 0.706428 2.67425C0.868428 2.77334 1.03841 2.84426 1.2314 2.8499C1.32015 2.91049 1.42064 2.88371 1.51549 2.88371C6.51775 2.88512 11.52 2.88465 16.5218 2.88559C16.6918 2.88559 16.8641 2.8607 17.0167 2.80622C17.1825 2.74704 17.3614 2.68317 17.4854 2.53851C17.5783 2.42955 17.6953 2.34501 17.7746 2.21961C17.8798 2.05241 17.9526 1.88005 17.9662 1.68279C17.9667 1.67293 17.9883 1.664 18 1.65508C18 1.51465 18 1.37375 18 1.23332L17.9995 1.23238Z"
        fill="#5A5A5A"
      />
    </svg>
  );

  const svgMaximize = (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="19"
      height="19"
      viewBox="0 0 19 19"
      fill="none"
    >
      <path
        d="M9.11576 18.0918C6.94011 18.0918 4.76497 18.0923 2.58932 18.0902C2.48601 18.0902 2.3827 18.0667 2.2799 18.0534C2.1771 18.0401 2.07226 18.0345 1.97253 18.0089C1.882 17.9854 1.80017 17.924 1.70965 17.9071C1.6048 17.8877 1.52195 17.8335 1.43347 17.7854C1.07598 17.5916 0.87345 17.3982 0.642792 17.1093C0.532322 16.9707 0.443332 16.8224 0.365083 16.6679C0.284787 16.5099 0.239269 16.337 0.192729 16.1652C0.166645 16.068 0.174828 15.9672 0.151814 15.8752C0.105784 15.6885 0.123173 15.5024 0.119593 15.3157C0.116013 15.1244 0.11857 14.9331 0.11857 14.7413C0.11857 10.6902 0.119082 6.63916 0.11499 2.58808C0.11499 2.47965 0.170737 2.38248 0.154371 2.27917C0.136982 2.16921 0.185057 2.07255 0.199889 1.97026C0.214209 1.87411 0.284787 1.78666 0.303199 1.69C0.323145 1.58566 0.376846 1.50281 0.424921 1.41382C0.618755 1.05633 0.812078 0.853797 1.10104 0.623139C1.23964 0.512669 1.38796 0.423679 1.54241 0.345429C1.70044 0.265134 1.87331 0.219616 2.04515 0.173075C2.14232 0.146992 2.24308 0.155175 2.33514 0.13216C2.52181 0.0861311 2.70797 0.10352 2.89465 0.0999398C3.08592 0.0963598 3.2772 0.098917 3.46899 0.098917C7.52008 0.098917 11.5712 0.0994284 15.6223 0.0953369C15.7307 0.0953369 15.8278 0.151083 15.9312 0.134718C16.0411 0.117329 16.1378 0.165404 16.2401 0.180235C16.3362 0.194556 16.4237 0.264622 16.5203 0.283545C16.6247 0.303491 16.708 0.357192 16.7965 0.404756C17.154 0.59859 17.356 0.791402 17.5872 1.08087C17.6977 1.21947 17.7866 1.36779 17.8649 1.52224C17.9452 1.68028 17.9907 1.85314 18.0373 2.02499C18.0633 2.12216 18.0552 2.22291 18.0782 2.31497C18.1242 2.50164 18.1068 2.68781 18.1104 2.87448C18.114 3.06576 18.1114 3.25704 18.1114 3.44882C18.1114 7.49991 18.1109 11.551 18.115 15.6021C18.115 15.7105 18.0592 15.8077 18.0756 15.911C18.093 16.021 18.0449 16.1176 18.0301 16.2199C18.0158 16.316 17.9457 16.4035 17.9268 16.5002C17.9068 16.6045 17.8536 16.6879 17.8056 16.7763C17.6112 17.1338 17.4194 17.3353 17.1295 17.567C16.9909 17.6775 16.842 17.7665 16.6881 17.8447C16.53 17.925 16.3572 17.9705 16.1853 18.0171C16.0882 18.0432 15.9874 18.035 15.8954 18.058C15.7087 18.104 15.5225 18.0866 15.3358 18.0902C15.1446 18.0938 14.9533 18.0912 14.7615 18.0912H9.11576V18.0918ZM1.76488 9.0961C1.76488 11.2585 1.76488 13.4213 1.76488 15.5837C1.76488 15.6691 1.78125 15.7519 1.79608 15.8368C1.83904 16.0793 1.9894 16.226 2.1817 16.3442C2.30803 16.4219 2.45072 16.446 2.59904 16.446C6.92425 16.446 11.2495 16.446 15.5747 16.4454C15.6729 16.4454 15.768 16.4327 15.8662 16.4132C16.0917 16.3682 16.2349 16.2301 16.349 16.0506C16.4293 15.9238 16.4656 15.7601 16.4656 15.6205C16.4656 11.2825 16.4656 6.94449 16.4656 2.607C16.4656 2.52159 16.4492 2.43874 16.4344 2.35384C16.3915 2.11142 16.2411 1.96464 16.0488 1.84649C15.9225 1.76876 15.7798 1.74472 15.6315 1.74472C11.3062 1.74472 6.98102 1.74472 2.65581 1.74523C2.55761 1.74523 2.46248 1.75802 2.36429 1.77745C2.13874 1.82246 1.99554 1.96055 1.88149 2.14006C1.8012 2.2669 1.76488 2.43055 1.76488 2.57018C1.76488 4.74532 1.76488 6.92097 1.76488 9.0961Z"
        fill="#5A5A5A"
      />
    </svg>
  );

  const svgClose = (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="18"
      height="18"
      viewBox="0 0 18 18"
      fill="none"
    >
      <path
        d="M18 16.3428C17.9883 16.3522 17.9662 16.3611 17.9662 16.3705C17.9653 16.6363 17.8446 16.8579 17.7084 17.0724C17.531 17.3518 17.2742 17.5405 16.9728 17.663C16.8742 17.7034 16.7657 17.7302 16.6582 17.7546C16.4798 17.795 16.3023 17.7903 16.1267 17.7799C15.799 17.7607 15.4868 17.6762 15.2173 17.4771C15.1352 17.4166 15.0558 17.3504 14.9835 17.2785C13.0366 15.333 11.0901 13.3869 9.14402 11.4404C9.10271 11.3991 9.0628 11.3569 9.01163 11.3043C8.97876 11.3212 8.94308 11.3353 8.91303 11.3569C8.88486 11.377 8.8628 11.4057 8.83791 11.4306C6.85855 13.4099 4.87965 15.3898 2.89887 17.3677C2.71577 17.5504 2.48713 17.6551 2.23501 17.7161C2.11623 17.7447 1.99651 17.7668 1.87679 17.7804C1.74956 17.795 1.61764 17.7968 1.49087 17.7804C1.3228 17.7583 1.15096 17.7367 0.996032 17.663C0.811523 17.5748 0.633587 17.4795 0.481003 17.3325C0.257056 17.1165 0.126069 16.848 0.0500113 16.5616C-0.00726646 16.3475 -0.0204122 16.1198 0.037335 15.8888C0.120435 15.555 0.128416 15.4977 0.323254 15.1982C0.396964 15.0846 0.477247 14.9766 0.573492 14.8804C2.57399 12.8803 4.57401 10.8803 6.5792 8.87513C6.51864 8.81504 6.45854 8.75447 6.39798 8.69391C4.44255 6.73942 2.48854 4.784 0.532177 2.83139C0.362222 2.66144 0.257056 2.46097 0.181468 2.23796C0.136397 2.10463 0.0913263 1.97035 0.113862 1.8281C0.124191 1.76378 0.0335791 1.71964 0.0988381 1.63842C0.13358 1.59523 0.100716 1.50274 0.113392 1.4356C0.166445 1.1586 0.27161 0.906019 0.435932 0.672213C0.537341 0.52808 0.664573 0.415872 0.801664 0.321974C0.960821 0.212583 1.13171 0.116807 1.32796 0.0670413C1.5228 0.0177449 1.71623 -0.00807704 1.91482 0.00225173C2.09792 0.0116415 2.27164 0.0623464 2.44018 0.13277C2.64864 0.219625 2.83455 0.336059 2.98995 0.504136C3.14911 0.675969 3.31437 0.842638 3.4862 1.00133C4.43598 1.87692 5.32191 2.81637 6.23976 3.72389C7.15949 4.6333 8.0703 5.55256 8.98486 6.46712C10.9408 4.51123 12.8952 2.55674 14.8497 0.60179C14.9934 0.458126 15.153 0.337937 15.3342 0.244508C15.3873 0.217278 15.4295 0.173615 15.4953 0.164226C15.553 0.156244 15.607 0.124788 15.6638 0.106009C15.7216 0.0867598 15.7868 0.0830039 15.8408 0.0651633C15.9892 0.0163364 16.1399 0.0247872 16.284 0.0407499C16.4558 0.0595294 16.6249 0.0980276 16.792 0.167981C16.9798 0.246386 17.138 0.361881 17.2939 0.479722C17.416 0.572212 17.6376 0.896629 17.7258 1.12339C17.8399 1.41776 17.8441 1.71683 17.816 2.01261C17.7939 2.24782 17.7089 2.48069 17.5554 2.67505C17.4958 2.75064 17.4366 2.82811 17.3685 2.89618C15.4272 4.8394 13.4849 6.78121 11.5426 8.72349C11.5023 8.76386 11.4614 8.80471 11.4121 8.854C11.4408 8.88452 11.4628 8.9094 11.4863 8.93241C12.8239 10.27 14.1615 11.6076 15.499 12.9451C16.1892 13.5583 16.8098 14.2419 17.4723 14.8827C17.6756 15.0794 17.8174 15.3165 17.915 15.578C17.9446 15.6574 17.9775 15.7461 17.9662 15.8391C17.9648 15.8527 17.9878 15.8696 17.9995 15.8846V16.3414L18 16.3428Z"
        fill="#5A5A5A"
      />
    </svg>
  );

  return (
    <div id="custom-title-bar" className="flex-center">
      <button
        id="minimize-btn"
        title="Minimize"
        className="unstyled-button title-bar-icons flex-center"
      >
        {svgMinimize}
      </button>
      <button
        id="maximize-btn"
        title="Maximize"
        className="unstyled-button title-bar-icons"
      >
        {svgMaximize}
      </button>
      <button
        id="close-btn"
        title="Close"
        className="unstyled-button title-bar-icons"
      >
        {svgClose}
      </button>
    </div>
  );
};

export default CustomTitleBar;
